<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Traducci√≥n LibreTranslate</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 20px; margin: 10px; font-size: 16px; }
        #result { margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 5px; }
    </style>
</head>
<body>
    <h2>üß™ Test de Traducci√≥n LibreTranslate (Fedilab)</h2>
    <div>
        <input id="textInput" type="text" placeholder="Escribe algo en espa√±ol" value="Hola mundo" style="width: 300px; padding: 10px;">
        <br>
        <button onclick="testTranslation()">Traducir Espa√±ol ‚Üí Ruso</button>
        <button onclick="testReverseTranslation()">Traducir Ruso ‚Üí Espa√±ol</button>
    </div>
    <div id="result">Resultado aparecer√° aqu√≠...</div>
    <script>
        async function testTranslation() {
            const text = document.getElementById('textInput').value;
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Traduciendo...';
            try {
                console.log('Enviando petici√≥n de traducci√≥n...');
                const response = await fetch('https://translate.fedilab.app/translate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: text,
                        source: 'es',
                        target: 'ru',
                        format: 'text'
                    })
                });
                console.log('Respuesta recibida:', response.status);
                if (!response.ok) {
                    throw new Error(`Error HTTP: ${response.status}`);
                }
                const data = await response.json();
                console.log('Datos:', data);
                resultDiv.innerHTML = `
                    <strong>Original (Espa√±ol):</strong> ${text}<br>
                    <strong>Traducido (Ruso):</strong> ${data.translatedText || 'Error en traducci√≥n'}<br>
                    <strong>Estado:</strong> ‚úÖ √âxito
                `;
            } catch (error) {
                console.error('Error en traducci√≥n:', error);
                resultDiv.innerHTML = `
                    <strong>‚ùå Error:</strong> ${error.message}<br>
                    <strong>Texto original:</strong> ${text}<br>
                    <strong>Posibles causas:</strong><br>
                    ‚Ä¢ Sin conexi√≥n a internet<br>
                    ‚Ä¢ Servidor no disponible<br>
                    ‚Ä¢ L√≠mite de requests alcanzado
                `;
            }
        }
        async function testReverseTranslation() {
            const russianText = '–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!';
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Traduciendo ruso a espa√±ol...';
            try {
                const response = await fetch('https://translate.fedilab.app/translate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        q: russianText,
                        source: 'ru',
                        target: 'es',
                        format: 'text'
                    })
                });
                if (!response.ok) {
                    throw new Error(`Error HTTP: ${response.status}`);
                }
                const data = await response.json();
                resultDiv.innerHTML = `
                    <strong>Original (Ruso):</strong> ${russianText}<br>
                    <strong>Traducido (Espa√±ol):</strong> ${data.translatedText}<br>
                    <strong>Estado:</strong> ‚úÖ √âxito
                `;
            } catch (error) {
                console.error('Error:', error);
                resultDiv.innerHTML = `‚ùå Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>